{
  "hash": "370bdb614edf756471a18ddddc582a73",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Hands-on_Exercise 4C\"\nsubtitle: \"Visualising Uncertainty\"\ndescription: \"\"\nauthor: patriciatrisno\ndate: \"May 8, 2025\"\ndate-modified: \"last-modified\"\n\neditor: visual\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n  code-fold: true\n---\n\n\n\n## **1 Learning Outcome**\n\nVizualising uncertainty is relatively new in statistical graphics. In this chapter, you will gain hands-on experience on creating statistical graphics for vizualising uncertainty. By the end of this chapter you will be able:\n\n-   to plot statistics error bars by using ggplot2,\n\n-   to plot interactive error bars by combining ggplot2, plotly and DT,\n\n-   to create advanced by using ggdist, and\n\n-   to create hypothetical outcome plots (HOPs) by using ungeviz package.\n\n## **2 Getting Started**\n\n### **2.1 Installing and loading the packages**\n\nFor the purpose of this exercise, the following R packages will be used, they are:\n\n-   tidyverse, a family of R packages for data science process,\n\n-   plotly for creating interactive plot,\n\n-   gganimate for creating animation plot,\n\n-   DT for displaying interactive html table,\n\n-   crosstalk for for implementing cross-widget interactions (currently, linked brushing and filtering), and\n\n-   ggdist for visualising distribution and uncertainty.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\npacman::p_load(plotly, crosstalk, DT, \n               ggdist, ggridges, colorspace,\n               gganimate, tidyverse)\n```\n:::\n\n\n\n### **2.2 Data import**\n\nIn this exercise we will use *Exam_data.csv*\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam <- read_csv(\"~/Documents/SMU/April Term 2/Visual Analytics/patriciatrisno/ISSS608-VAA/Hands-on_Ex/Hands-on_Ex04/data/Exam_data.csv\")\n```\n:::\n\n\n\n## **3 Visualizing the uncertainty of point estimates: ggplot2 methods**\n\nA point estimate is a single number, such as a mean. Uncertainty, on the other hand, is expressed as standard error, confidence interval, or credible interval.\n\n::: callout-important\nDon’t confuse the uncertainty of a point estimate with the variation in the sample\\\n\\\nCheck Part 6 to learn more about visualizing uncertainty\n:::\n\nIn this section, we will plot error bars of maths scores by race by using data provided in *exam* tibble data frame.\n\nFirstly, code chunk below will be used to derive the necessary summary statistics.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nmy_sum <- exam %>%\n  group_by(RACE) %>%\n  summarise(\n    n=n(),\n    mean=mean(MATHS),\n    sd=sd(MATHS)\n    ) %>%\n  mutate(se=sd/sqrt(n-1))\n```\n:::\n\n\n\n::: callout-tip\n### Things to learn from the code chunk above\n\n-   `group_by()` of **dplyr** package is used to group the observation by RACE,\n-   `summarise()` is used to compute the count of observations, mean, standard deviation\n-   `mutate()` is used to derive standard error of Maths by RACE, and\n-   the output is save as a tibble data table called *my_sum*.\n:::\n\nWhile for the purpose of visual **representation and easy interpretation of the data**, we will use the code chunk below to display the `my_sum` tibble data frame in an HTML table format.\n\n::: panel-tabset\n## The Table\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> RACE </th>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> mean </th>\n   <th style=\"text-align:right;\"> sd </th>\n   <th style=\"text-align:right;\"> se </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Chinese </td>\n   <td style=\"text-align:right;\"> 193 </td>\n   <td style=\"text-align:right;\"> 76.50777 </td>\n   <td style=\"text-align:right;\"> 15.69040 </td>\n   <td style=\"text-align:right;\"> 1.132357 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Indian </td>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:right;\"> 60.66667 </td>\n   <td style=\"text-align:right;\"> 23.35237 </td>\n   <td style=\"text-align:right;\"> 7.041005 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Malay </td>\n   <td style=\"text-align:right;\"> 108 </td>\n   <td style=\"text-align:right;\"> 57.44444 </td>\n   <td style=\"text-align:right;\"> 21.13478 </td>\n   <td style=\"text-align:right;\"> 2.043177 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Others </td>\n   <td style=\"text-align:right;\"> 9 </td>\n   <td style=\"text-align:right;\"> 69.66667 </td>\n   <td style=\"text-align:right;\"> 10.72381 </td>\n   <td style=\"text-align:right;\"> 3.791438 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n## The Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::kable(head(my_sum), format = 'html')\n```\n:::\n\n\n:::\n\n### \n\n::: callout-note\n### Calculating the confidence interval of a mean\n\n<br>\n\n![](images/img%20bb.png){width=\"475\"}\n\n<br>\n:::\n\n### 3.1 Plotting standard error bars of point estimates\n\nNow we are ready to plot the standard error bars of mean maths score by race as shown below.\n\n:::: panel-tabset\n## The Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Exercise-4C_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n## The Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(my_sum) +\n  geom_errorbar(\n    aes(x=RACE, \n        ymin=mean-se, \n        ymax=mean+se), \n    width=0.2, \n    colour=\"black\", \n    alpha=0.9, \n    linewidth=0.5) +\n  geom_point(aes\n           (x=RACE, \n            y=mean), \n           stat=\"identity\", \n           color=\"red\",\n           size = 1.5,\n           alpha=1) +\n  ggtitle(\"Standard Error of Mean Maths Score by Race\")+\n  labs(x = \"Race\", y = \"Mean Maths Score\") +\n  scale_y_continuous(breaks = seq(floor(min(my_sum$mean - my_sum$se) / 5) * 5, \n                                  ceiling(max(my_sum$mean + my_sum$se) / 5) * 5, by = 5)) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\", margin = margin(b = 25)),\n    axis.title.x = element_text(size = 12, face = \"bold\", hjust = 0.5, margin = margin(t = 10)),\n    axis.title.y = element_text(size = 12, face = \"bold\", hjust = 0.5, vjust = 0.5, margin = margin(r = 12))\n  )\n```\n:::\n\n\n\n::: callout-tip\n### Things to learn from the code chunk above\n\n-   The error bars are computed by using the formula mean+/-se.\n-   For `geom_point()`, it is important to indicate *stat=\"identity\"*.\n:::\n::::\n\n### 3.2 Plotting confidence interval of point estimates\n\nInstead of plotting the standard error bar of point estimates, we can also plot the confidence intervals of mean maths score by race.\n\n:::: panel-tabset\n## The Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Exercise-4C_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n## The Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(my_sum) +\n  geom_errorbar(\n    aes(x = reorder(RACE, -mean),\n        ymin = mean - 1.96 * se,\n        ymax = mean + 1.96 * se),\n    width = 0.2,\n    colour = \"black\",\n    alpha = 0.9,\n    linewidth = 0.5\n  ) +\n  geom_point(aes(\n    x = RACE,\n    y = mean\n  ),\n  stat = \"identity\",\n  color = \"red\",\n  size = 1.5,\n  alpha = 1) +\n  labs(x = \"Race\",\n       y = \"Mean Maths Score\",\n       title = \"95% Confidence Interval of Mean Maths Score by Race\") +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\", margin = margin(b = 25)),\n    axis.title.x = element_text(size = 12, face = \"bold\", hjust = 0.5, margin = margin(t = 10)),\n    axis.title.y = element_text(size = 12, face = \"bold\", hjust = 0.5, vjust = 0.5, margin = margin(r = 12))\n  )\n```\n:::\n\n\n\n::: callout-tip\n### Things to learn from the code chunk above\n\n-   The confidence intervals are computed by using the formula mean+/-1.96\\*se.\n-   The error bars is sorted by using the average maths scores.\n-   `labs()` argument of ggplot2 is used to change the x-axis label.\n:::\n::::\n\n### 3.3 Visualizing the uncertainty of point estimates with interactive error bars\n\nIn this section, you will learn how to plot interactive error bars for the 99% confidence interval of mean maths score by race as shown in the figure below.\n\n::: panel-tabset\n## The Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-964581ce795ef7af6973\" style=\"width:100%;height:400px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-964581ce795ef7af6973\">{\"x\":{\"data\":[{\"x\":[1,3,4,2],\"y\":[76.507772020725383,60.666666666666671,57.444444444444429,69.666666666666671],\"text\":\"\",\"key\":[\"1\",\"2\",\"3\",\"4\"],\"type\":\"scatter\",\"mode\":\"lines\",\"opacity\":0.90000000000000002,\"line\":{\"color\":\"transparent\"},\"error_y\":{\"array\":[2.9214818033281915,18.16579402963913,5.2713960499886028,9.7819093228264933],\"arrayminus\":[2.9214818033281915,18.16579402963913,5.2713960499886028,9.7819093228265004],\"type\":\"data\",\"width\":4.0000000000000044,\"symmetric\":false,\"color\":\"rgba(0,0,0,1)\"},\"set\":\"SharedDatacd5ffcc8\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"_isNestedKey\":false,\"frame\":null},{\"x\":[1,3,4,2],\"y\":[76.507772020725383,60.666666666666671,57.444444444444429,69.666666666666671],\"text\":[\"Race: Chinese <br>N: 193 <br>Avg. Scores: 76.51 <br>99% CI:[ 73.59 , 79.43 ]\",\"Race: Indian <br>N: 12 <br>Avg. Scores: 60.67 <br>99% CI:[ 42.5 , 78.83 ]\",\"Race: Malay <br>N: 108 <br>Avg. Scores: 57.44 <br>99% CI:[ 52.17 , 62.72 ]\",\"Race: Others <br>N: 9 <br>Avg. Scores: 69.67 <br>99% CI:[ 59.88 , 79.45 ]\"],\"key\":[\"1\",\"2\",\"3\",\"4\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(255,0,0,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(255,0,0,1)\"}},\"hoveron\":\"points\",\"set\":\"SharedDatacd5ffcc8\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"_isNestedKey\":false,\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":50.845818773908846,\"l\":37.260273972602747},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"99% Confidence interval of average maths scores by race\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,4.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"Chinese\",\"Others\",\"Indian\",\"Malay\"],\"tickvals\":[1,2,3,4],\"categoryorder\":\"array\",\"categoryarray\":[\"Chinese\",\"Others\",\"Indian\",\"Malay\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-45,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Race\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[40.653487469404261,81.295961157116452],\"tickmode\":\"array\",\"ticktext\":[\"50\",\"60\",\"70\",\"80\"],\"tickvals\":[50,60,70,80],\"categoryorder\":\"array\",\"categoryarray\":[\"50\",\"60\",\"70\",\"80\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Average Scores\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\",\"dragmode\":\"zoom\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"135b440069def\":{\"x\":{},\"ymin\":{},\"ymax\":{},\"type\":\"scatter\"},\"135b4726ad6bf\":{\"x\":{},\"y\":{},\"text\":{}}},\"cur_data\":\"135b440069def\",\"visdat\":{\"135b440069def\":[\"function (y) \",\"x\"],\"135b4726ad6bf\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0,\"ctGroups\":[\"SharedDatacd5ffcc8\"]},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n<div id=\"htmlwidget-03e3f80b69153fca6122\" style=\"width:90%;height:auto;\" class=\"datatables html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-03e3f80b69153fca6122\">{\"x\":{\"crosstalkOptions\":{\"key\":[\"1\",\"2\",\"3\",\"4\"],\"group\":\"SharedDatacd5ffcc8\"},\"filter\":\"none\",\"vertical\":false,\"data\":[[\"Chinese\",\"Indian\",\"Malay\",\"Others\"],[193,12,108,9],[76.50777202072538,60.66666666666667,57.44444444444443,69.66666666666667],[15.69040284264305,23.35237318418266,21.13478478068459,10.72380529476361],[1.132357288111705,7.041005437844626,2.043176763561474,3.791437722025775]],\"container\":\"<table class=\\\"compact\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>No. of pupils<\\/th>\\n      <th>Avg Scores<\\/th>\\n      <th>Std Dev<\\/th>\\n      <th>Std Error<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"pageLength\":10,\"scrollX\":true,\"columnDefs\":[{\"targets\":2,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"targets\":3,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"targets\":4,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"className\":\"dt-right\",\"targets\":[1,2,3,4]},{\"orderable\":false,\"targets\":0},{\"name\":\"RACE\",\"targets\":0},{\"name\":\"n\",\"targets\":1},{\"name\":\"mean\",\"targets\":2},{\"name\":\"sd\",\"targets\":3},{\"name\":\"se\",\"targets\":4}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false},\"selection\":{\"mode\":\"multiple\",\"selected\":null,\"target\":\"row\",\"selectable\":null}},\"evals\":[\"options.columnDefs.0.render\",\"options.columnDefs.1.render\",\"options.columnDefs.2.render\"],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n## The Code\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-3e8aff5e98dc1c768786\" style=\"width:100%;height:400px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-3e8aff5e98dc1c768786\">{\"x\":{\"data\":[{\"x\":[1,3,4,2],\"y\":[76.507772020725383,60.666666666666671,57.444444444444429,69.666666666666671],\"text\":\"\",\"key\":[\"1\",\"2\",\"3\",\"4\"],\"type\":\"scatter\",\"mode\":\"lines\",\"opacity\":0.90000000000000002,\"line\":{\"color\":\"transparent\"},\"error_y\":{\"array\":[2.9214818033281915,18.16579402963913,5.2713960499886028,9.7819093228264933],\"arrayminus\":[2.9214818033281915,18.16579402963913,5.2713960499886028,9.7819093228265004],\"type\":\"data\",\"width\":4.0000000000000044,\"symmetric\":false,\"color\":\"rgba(0,0,0,1)\"},\"set\":\"SharedData964581ce\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"_isNestedKey\":false,\"frame\":null},{\"x\":[1,3,4,2],\"y\":[76.507772020725383,60.666666666666671,57.444444444444429,69.666666666666671],\"text\":[\"Race: Chinese <br>N: 193 <br>Avg. Scores: 76.51 <br>99% CI:[ 73.59 , 79.43 ]\",\"Race: Indian <br>N: 12 <br>Avg. Scores: 60.67 <br>99% CI:[ 42.5 , 78.83 ]\",\"Race: Malay <br>N: 108 <br>Avg. Scores: 57.44 <br>99% CI:[ 52.17 , 62.72 ]\",\"Race: Others <br>N: 9 <br>Avg. Scores: 69.67 <br>99% CI:[ 59.88 , 79.45 ]\"],\"key\":[\"1\",\"2\",\"3\",\"4\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(255,0,0,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(255,0,0,1)\"}},\"hoveron\":\"points\",\"set\":\"SharedData964581ce\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"_isNestedKey\":false,\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":50.845818773908846,\"l\":37.260273972602747},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"99% Confidence interval of average maths scores by race\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,4.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"Chinese\",\"Others\",\"Indian\",\"Malay\"],\"tickvals\":[1,2,3,4],\"categoryorder\":\"array\",\"categoryarray\":[\"Chinese\",\"Others\",\"Indian\",\"Malay\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-45,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Race\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[40.653487469404261,81.295961157116452],\"tickmode\":\"array\",\"ticktext\":[\"50\",\"60\",\"70\",\"80\"],\"tickvals\":[50,60,70,80],\"categoryorder\":\"array\",\"categoryarray\":[\"50\",\"60\",\"70\",\"80\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Average Scores\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498}},\"hovermode\":\"closest\",\"barmode\":\"relative\",\"dragmode\":\"zoom\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"135b463ddeac4\":{\"x\":{},\"ymin\":{},\"ymax\":{},\"type\":\"scatter\"},\"135b47e601d14\":{\"x\":{},\"y\":{},\"text\":{}}},\"cur_data\":\"135b463ddeac4\",\"visdat\":{\"135b463ddeac4\":[\"function (y) \",\"x\"],\"135b47e601d14\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0,\"ctGroups\":[\"SharedData964581ce\"]},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n<div id=\"htmlwidget-f01121da593d485d46a0\" style=\"width:90%;height:auto;\" class=\"datatables html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-f01121da593d485d46a0\">{\"x\":{\"crosstalkOptions\":{\"key\":[\"1\",\"2\",\"3\",\"4\"],\"group\":\"SharedData964581ce\"},\"filter\":\"none\",\"vertical\":false,\"data\":[[\"Chinese\",\"Indian\",\"Malay\",\"Others\"],[193,12,108,9],[76.50777202072538,60.66666666666667,57.44444444444443,69.66666666666667],[15.69040284264305,23.35237318418266,21.13478478068459,10.72380529476361],[1.132357288111705,7.041005437844626,2.043176763561474,3.791437722025775]],\"container\":\"<table class=\\\"compact\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>No. of pupils<\\/th>\\n      <th>Avg Scores<\\/th>\\n      <th>Std Dev<\\/th>\\n      <th>Std Error<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"pageLength\":10,\"scrollX\":true,\"columnDefs\":[{\"targets\":2,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"targets\":3,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"targets\":4,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"className\":\"dt-right\",\"targets\":[1,2,3,4]},{\"orderable\":false,\"targets\":0},{\"name\":\"RACE\",\"targets\":0},{\"name\":\"n\",\"targets\":1},{\"name\":\"mean\",\"targets\":2},{\"name\":\"sd\",\"targets\":3},{\"name\":\"se\",\"targets\":4}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false},\"selection\":{\"mode\":\"multiple\",\"selected\":null,\"target\":\"row\",\"selectable\":null}},\"evals\":[\"options.columnDefs.0.render\",\"options.columnDefs.1.render\",\"options.columnDefs.2.render\"],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n:::\n\n## 4 Visualising Uncertainty: **ggdist** package\n\n-   [**ggdist**](https://mjskay.github.io/ggdist/index.html) is an R package that provides a flexible set of ggplot2 geoms and stats designed especially for visualising distributions and uncertainty.\n-   It is designed for both frequentist and Bayesian uncertainty visualization, taking the view that uncertainty visualization can be unified through the perspective of distribution visualization:\n    -   for frequentist models, one visualises confidence distributions or bootstrap distributions (see vignette(\"freq-uncertainty-vis\"));\n    -   for Bayesian models, one visualises probability distributions (see the tidybayes package, which builds on top of ggdist).\n\n![](images/ggdist.png){width=\"601\"}\n\n### 4.1 Visualizing the uncertainty of point estimates: **ggdist** methods\n\nIn the code chunk below, [`stat_pointinterval()`](https://mjskay.github.io/ggdist/reference/stat_pointinterval.html) of **ggdist** is used to build a visual for displaying distribution of maths scores by race.\n\n::: panel-tabset\n### The Plot {.tabset}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Exercise-4C_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n### The Code {.tabset}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam %>% ggplot(aes(x = RACE,y = MATHS)) +\n  stat_pointinterval() +\n\n  labs(\n    title = \"Visualising Confidence Intervals of Mean Math Score\",\n    subtitle = \"Mean Point with Multiple Intervals\",\n    x = \"Race\", \n    y = \"Maths Score\" )+\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 16, face = \"bold\", margin = margin(b = 15)), \n    plot.subtitle = element_text(hjust = 0.5, size = 12, margin = margin(b = 10)), \n    axis.title.x = element_text(size = 14, face = \"bold\", hjust = 0.5, margin = margin(t = 10)), \n    axis.title.y = element_text(size = 14, face = \"bold\", vjust = 1, margin = margin(r = 10)), \n    axis.text.x = element_text(size = 12), \n    axis.text.y = element_text(size = 12)\n  )\n```\n:::\n\n\n\n**This function comes with many arguments:**\n\n-   .width = controls the width of the confidence/credible interval that is displayed.\n\n-   .point = determines the point estimate that is displayed within the interval.\n\n-   .interval = specifies the type of interval to be displayed. qi stands for quantile interval.\n:::\n\nFor example, in the code chunk below the following arguments are used:\n\n-   .width = 0.95\n-   .point = median\n-   .interval = qi\n\n::: panel-tabset\n### The Plot {.tabset}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Exercise-4C_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n\n### The Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam %>%\n  ggplot(aes(x = RACE, y = MATHS)) +\n  stat_pointinterval(.width = 0.95,\n  .point = median,\n  .interval = qi) +\n  labs(\n    title = \"Visualising confidence intervals of median math score\",\n    subtitle = \"Median Point + Multiple-interval plot\",\n    x = \"Race\", \n    y = \"Maths Score\" )+\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 16, face = \"bold\", margin = margin(b = 15)), \n    plot.subtitle = element_text(hjust = 0.5, size = 12, margin = margin(b = 10)), \n    axis.title.x = element_text(size = 14, face = \"bold\", hjust = 0.5, margin = margin(t = 10)), \n    axis.title.y = element_text(size = 14, face = \"bold\", vjust = 1, margin = margin(r = 10)), \n    axis.text.x = element_text(size = 12), \n    axis.text.y = element_text(size = 12)\n  )\n```\n:::\n\n\n:::\n\n### 4.2 Visualizing the uncertainty of point estimates: **ggdist** methods - Part 2\n\n#### Using 95% Confidence Intervals\n\n::: panel-tabset\n### The Plot {.tabset}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Exercise-4C_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\n**When the distribution within each race group relatively symmetric and no extreme outliers, it is hard to spot the different in the plot.**\n\n### The Code {.tabset}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Using .point = mean and .interval = hdi for 95% Highest Density Interval\n\nexam %>%\n  ggplot(aes(x = RACE, y = MATHS)) +\n  stat_pointinterval(.width = 0.95,\n                     .point = mean,\n                     .interval = hdi,\n                     show.legend = FALSE,\n                     point_size = 2,\n                     interval_size = 1) +\n  labs(\n    title = \"95% CI of Mean Math Score (HDI)\",\n    subtitle = \"Mean Point with 95% Highest Density Interval\",\n    x = \"Race\",\n    y = \"Maths Score\"\n  ) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 16, face = \"bold\", margin = margin(b = 15)),\n    plot.subtitle = element_text(hjust = 0.5, size = 12, margin = margin(b = 10)),\n    axis.title.x = element_text(size = 14, face = \"bold\", hjust = 0.5, margin = margin(t = 10)),\n    axis.title.y = element_text(size = 14, face = \"bold\", vjust = 1, margin = margin(r = 10)),\n    axis.text.x = element_text(size = 12),\n    axis.text.y = element_text(size = 12)\n  )\n```\n:::\n\n\n:::\n\n#### Using 99% Confidence Intervals\n\n::: panel-tabset\n### The Plot {.tabset}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Exercise-4C_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n\n### The Code {.tabset}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Using .point = mean and .interval = hdi for 99% Highest Density Interval\n\nexam %>%\n  ggplot(aes(x = RACE, y = MATHS)) +\n  stat_pointinterval(.width = 0.99,\n                     .point = mean,\n                     .interval = hdi,\n                     show.legend = FALSE,\n                     point_size = 2,\n                     interval_size = 1) +\n  labs(\n    title = \"99% CI of Mean Math Score (HDI)\",\n    subtitle = \"Mean Point with 99% Highest Density Interval\",\n    x = \"Race\",\n    y = \"Maths Score\"\n  ) +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 16, face = \"bold\", margin = margin(b = 15)),\n    plot.subtitle = element_text(hjust = 0.5, size = 12, margin = margin(b = 10)),\n    axis.title.x = element_text(size = 14, face = \"bold\", hjust = 0.5, margin = margin(t = 10)),\n    axis.title.y = element_text(size = 14, face = \"bold\", vjust = 1, margin = margin(r = 10)),\n    axis.text.x = element_text(size = 12),\n    axis.text.y = element_text(size = 12)\n  )\n```\n:::\n\n\n:::\n\n::: callout-note\nNote: Use the code below for reference\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nexam %>%\n  ggplot(aes(x = RACE, \n             y = MATHS)) +\n  stat_pointinterval(\n    show.legend = FALSE) +   \n  labs(\n    title = \"Visualising confidence intervals of mean math score\",\n    subtitle = \"Mean Point + Multiple-interval plot\",\n    x = \"Race\", \n    y = \"Maths Score\" )+\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 16, face = \"bold\", margin = margin(b = 15)), \n    plot.subtitle = element_text(hjust = 0.5, size = 12, margin = margin(b = 10)), \n    axis.title.x = element_text(size = 14, face = \"bold\", hjust = 0.5, margin = margin(t = 10)), \n    axis.title.y = element_text(size = 14, face = \"bold\", vjust = 1, margin = margin(r = 10)), \n    axis.text.x = element_text(size = 12), \n    axis.text.y = element_text(size = 12)\n  )\n```\n\n::: {.cell-output-display}\n![](Hands-on_Exercise-4C_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n:::\n\n::: callout-note\n## Attention\n\nAs mentioned that this function comes with many arguments, students are advised to read the syntax reference for more detail.\n:::\n\n### 4.3 Visualizing the uncertainty of point estimates: **ggdist** methods\n\nIn the code chunk below, [`stat_gradientinterval()`](https://mjskay.github.io/ggdist/reference/stat_gradientinterval.html) of **ggdist** is used to build a visual for displaying distribution of maths scores by race.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nexam %>%\n  ggplot(aes(x = RACE, \n             y = MATHS)) +\n  stat_gradientinterval(   \n    fill = \"skyblue\",      \n    show.legend = FALSE     \n  ) +                        \n  labs(\n    title = \"Visualising Confidence Intervals of Mean Math Score by Race\",\n    subtitle = \"Gradient + interval plot\",\n    x = \"Race\", \n    y = \"Maths Score\" )+\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\", margin = margin(b = 15)), \n    plot.subtitle = element_text(hjust = 0.5, size = 12, margin = margin(b = 10)), \n    axis.title.x = element_text(size = 14, face = \"bold\", hjust = 0.5, margin = margin(t = 10)), \n    axis.title.y = element_text(size = 14, face = \"bold\", vjust = 1, margin = margin(r = 10)), \n    axis.text.x = element_text(size = 12), \n    axis.text.y = element_text(size = 12)\n  )\n```\n\n::: {.cell-output-display}\n![](Hands-on_Exercise-4C_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\n\n## 5 Visualising Uncertainty with Hypothetical Outcome Plots (HOPs)\n\n### 5.1 Installing ungeviz package\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndevtools::install_github(\"wilkelab/ungeviz\")\n```\n:::\n\n\n\nNote: You only need to perform this step once.\n\n### 5.2 Launch the application in R\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ungeviz)\n```\n:::\n\n\n\n### 5.3 Visualising Uncertainty with Hypothetical Outcome Plots (HOPs)\n\nNext, the code chunk below will be used to build the HOPs.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(data = exam, \n       (aes(x = factor(RACE), \n            y = MATHS))) +\n  geom_point(position = position_jitter(\n    height = 0.3, \n    width = 0.05), \n    size = 0.4, \n    color = \"#0072B2\", \n    alpha = 1/2) +\n  geom_hpline(data = sampler(25, \n                             group = RACE), \n              height = 0.6, \n              color = \"#D55E00\") +\n  labs(\n    title = \"Hypothetical Outcome Plots of Maths Scores by Race\",\n    x = \"Race\",\n    y = \"Maths Score\"\n  ) +\n  theme_bw() +\n  theme(\n    plot.title = element_text(hjust = 0.5, size = 16, face = \"bold\", margin = margin(b = 15)),\n    axis.title.x = element_text(size = 14, face = \"bold\", hjust = 0.5, margin = margin(t = 10)),\n    axis.title.y = element_text(size = 14, face = \"bold\", vjust = 1, margin = margin(r = 10)),\n    axis.text.x = element_text(size = 12, face = \"bold\"),\n    axis.text.y = element_text(size = 12, face = \"bold\"),\n    panel.spacing = unit(1, \"lines\") \n  ) + \n  transition_states(.draw, 1, 3)\n```\n\n::: {.cell-output-display}\n![](Hands-on_Exercise-4C_files/figure-html/unnamed-chunk-24-1.gif)\n:::\n:::\n\n\n\n## 6 More about Vizualising Uncertainty\n\nWhen we look at numbers and charts that try to predict things, like how well students might score or who might win an election, it's important to remember that these are just our best guesses. There's always a chance things could turn out a bit differently. This \"wiggle room\" or possibility of other outcomes is what we call **uncertainty**.\n\nOther example, when we flipping a coin. We predict a 50/50 chance for heads or tails, but every flip is its own event, and sometimes you might get heads three times in a row just by chance. That doesn't mean our 50/50 prediction was wrong, just that something unlikely happened.\n\n***\" If something unlikely happens, it doesn’t automatically mean our prediction was wrong; it just means that something unusual occurred. \"***\n\nSo, how do we show this \"wiggle room\" in our charts? One way is using **error bars**. These little lines sticking out from our main point show a range of scores or results that are reasonably likely. Another way is to use **gradient plots**, where shaded areas show us a general idea of where the real number might be. Darker areas mean those outcomes are more likely, while lighter areas mean they are less likely.\n\nIt's crucial to show this uncertainty because it gives a more honest picture. Just giving one number can be misleading and make us think we know exactly what will happen, which is rarely the case! By showing the range of possibilities, we get a better sense of what could happen and can make smarter decisions\n",
    "supporting": [
      "Hands-on_Exercise-4C_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.4/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n<link href=\"../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/datatables-binding-0.33/datatables.js\"></script>\n<link href=\"../../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}